<!DOCTYPE html>
<!-- saved from url=(0083)https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>updater_sample - platform/bootable/recovery - Git at Google</title><link rel="stylesheet" type="text/css" href="./updater_sample - platform_bootable_recovery - Git at Google_files/base.css"><link rel="stylesheet" type="text/css" href="./updater_sample - platform_bootable_recovery - Git at Google_files/doc.css"><link rel="stylesheet" type="text/css" href="./updater_sample - platform_bootable_recovery - Git at Google_files/prettify.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="https://android.googlesource.com/"><img src="./updater_sample - platform_bootable_recovery - Git at Google_files/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?faa=1&amp;service=gerritcodereview&amp;continue=https://android.googlesource.com/login/platform/bootable/recovery/%2B/refs/heads/main/updater_sample">Sign in</a> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="https://android.googlesource.com/?format=HTML">android</a> / <a class="Breadcrumbs-crumb" href="https://android.googlesource.com/platform/">platform</a> / <a class="Breadcrumbs-crumb" href="https://android.googlesource.com/platform/bootable/">bootable</a> / <a class="Breadcrumbs-crumb" href="https://android.googlesource.com/platform/bootable/recovery/">recovery</a> / <a class="Breadcrumbs-crumb" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main">refs/heads/main</a> / <a class="Breadcrumbs-crumb" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/">.</a> / <span class="Breadcrumbs-crumb">updater_sample</span></div><div class="TreeDetail"><div class="u-sha1 u-monospace TreeDetail-sha1">tree: 5b626360d5ae45517cc83cefabd0701619728d32 [<a href="https://android.googlesource.com/platform/bootable/recovery/+log/refs/heads/main/updater_sample">path history</a>] <span>[<a href="https://android.googlesource.com/platform/bootable/recovery/+archive/refs/heads/main/updater_sample.tar.gz">tgz</a>]</span></div><ol class="FileList"><li class="FileList-item FileList-item--gitTree" title="Tree - res/"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/res/">res/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - src/"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/src/">src/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tests/"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/tests/">tests/</a></li><li class="FileList-item FileList-item--gitTree" title="Tree - tools/"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/tools/">tools/</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - .gitignore"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/.gitignore">.gitignore</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - Android.bp"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/Android.bp">Android.bp</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - AndroidManifest.xml"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/AndroidManifest.xml">AndroidManifest.xml</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - proguard.flags"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/proguard.flags">proguard.flags</a></li><li class="FileList-item FileList-item--regularFile" title="Regular file - README.md"><a class="FileList-itemLink" href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/main/updater_sample/README.md">README.md</a></li></ol><div class="InlineReadme"><div class="InlineReadme-path">updater_sample/README.md</div><div class="doc"><h1><a class="h" name="SystemUpdaterSample" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#SystemUpdaterSample"><span></span></a><a class="h" name="systemupdatersample" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#systemupdatersample"><span></span></a>SystemUpdaterSample</h1><p>This app demonstrates how to use Android system updates APIs to install <a href="https://source.android.com/devices/tech/ota/">OTA updates</a>. It contains a sample client for <code class="code">update_engine</code> to install A/B (seamless) updates.</p><p>A/B (seamless) update is available since Android Nougat (API 24), but this sample targets the latest android.</p><h2><a class="h" name="Workflow" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Workflow"><span></span></a><a class="h" name="workflow" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#workflow"><span></span></a>Workflow</h2><p>SystemUpdaterSample app shows list of available updates on the UI. User is allowed to select an update and apply it to the device. App shows installation progress, logs can be found in <code class="code">adb logcat</code>. User can stop or reset an update. Resetting the update requests update engine to cancel any ongoing update, and revert if the update has been applied. Stopping does not revert the applied update.</p><h2><a class="h" name="Update-Config-file" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Update-Config-file"><span></span></a><a class="h" name="update-config-file" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#update-config-file"><span></span></a>Update Config file</h2><p>In this sample updates are defined in JSON update config files. The structure of a config file is defined in <code class="code">com.example.android.systemupdatersample.UpdateConfig</code>, example file is located at <code class="code">res/raw/sample.json</code>.</p><p>In real-life update system the config files expected to be served from a server to the app, but in this sample, the config files are stored on the device. The directory can be found in logs or on the UI. In most cases it should be located at <code class="code">/data/user/0/com.example.android.systemupdatersample/files/configs/</code>.</p><p>SystemUpdaterSample app downloads OTA package from <code class="code">url</code>. In this sample app <code class="code">url</code> is expected to point to file system, e.g. <code class="code">file:///data/my-sample-ota-builds-dir/ota-002.zip</code>.</p><p>If <code class="code">ab_install_type</code> is <code class="code">NON_STREAMING</code> then app checks if <code class="code">url</code> starts with <code class="code">file://</code> and passes <code class="code">url</code> to the <code class="code">update_engine</code>.</p><p>If <code class="code">ab_install_type</code> is <code class="code">STREAMING</code>, app downloads only the entries in need, as opposed to the entire package, to initiate a streaming update. The <code class="code">payload.bin</code> entry, which takes up the majority of the space in an OTA package, will be streamed by <code class="code">update_engine</code> directly. The ZIP entries in such a package need to be saved uncompressed (<code class="code">ZIP_STORED</code>), so that their data can be downloaded directly with the offset and length. As <code class="code">payload.bin</code> itself is already in compressed format, the size penalty is marginal.</p><p>if <code class="code">ab_config.force_switch_slot</code> set true device will boot to the updated partition on next reboot; otherwise button “Switch Slot” will become active, and user can manually set updated partition as the active slot.</p><p>Config files can be generated using <code class="code">tools/gen_update_config.py</code>. Running <code class="code">./tools/gen_update_config.py --help</code> shows usage of the script.</p><h2><a class="h" name="Sample-App-State-vs-UpdateEngine-Status" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Sample-App-State-vs-UpdateEngine-Status"><span></span></a><a class="h" name="sample-app-state-vs-updateengine-status" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#sample-app-state-vs-updateengine-status"><span></span></a>Sample App State vs UpdateEngine Status</h2><p>UpdateEngine provides status for different stages of update application process. But it lacks of proper status codes when update fails.</p><p>This creates two problems:</p><ol><li><p>If sample app is unbound from update_engine (MainActivity is paused, destroyed), app doesn't receive onStatusUpdate and onPayloadApplicationCompleted notifications. If app binds to update_engine after update is completed, only onStatusUpdate is called, but status becomes IDLE in most cases. And there is no way to know if update was successful or not.</p></li><li><p>This sample app demostrates suspend/resume using update_engins‘s <code class="code">cancel</code> and <code class="code">applyPayload</code> (which picks up from where it left). When <code class="code">cancel</code> is called, status is set to <code class="code">IDLE</code>, which doesn’t allow tracking suspended state properly.</p></li></ol><p>To solve these problems sample app implements its own separate update state - <code class="code">UpdaterState</code>. To solve the first problem, sample app persists <code class="code">UpdaterState</code> on a device. When app is resumed, it checks if <code class="code">UpdaterState</code> matches the update_engine‘s status (as onStatusUpdate is guaranteed to be called). If they doesn’t match, sample app calls <code class="code">applyPayload</code> again with the same parameters, and handles update completion properly using <code class="code">onPayloadApplicationCompleted</code> callback. The second problem is solved by adding <code class="code">PAUSED</code> updater state.</p><h2><a class="h" name="Sample-App-UI" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Sample-App-UI"><span></span></a><a class="h" name="sample-app-ui" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#sample-app-ui"><span></span></a>Sample App UI</h2><h3><a class="h" name="Text-fields" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Text-fields"><span></span></a><a class="h" name="text-fields" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#text-fields"><span></span></a>Text fields</h3><ul><li><code class="code">Current Build:</code> - shows current active build.</li><li><code class="code">Updater state:</code> - SystemUpdaterSample app state.</li><li><code class="code">Engine status:</code> - last reported update_engine status.</li><li><code class="code">Engine error:</code> - last reported payload application error.</li></ul><h3><a class="h" name="Buttons" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Buttons"><span></span></a><a class="h" name="buttons" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#buttons"><span></span></a>Buttons</h3><ul><li><code class="code">Reload</code> - reloads update configs from device storage.</li><li><code class="code">View config</code> - shows selected update config.</li><li><code class="code">Apply</code> - applies selected update config.</li><li><code class="code">Stop</code> - cancel running update, calls <code class="code">UpdateEngine#cancel</code>.</li><li><code class="code">Reset</code> - reset update, calls <code class="code">UpdateEngine#resetStatus</code>, can be called only when update is not running.</li><li><code class="code">Suspend</code> - suspend running update, uses <code class="code">UpdateEngine#cancel</code>.</li><li><code class="code">Resume</code> - resumes suspended update, uses <code class="code">UpdateEngine#applyPayload</code>.</li><li><code class="code">Switch Slot</code> - if <code class="code">ab_config.force_switch_slot</code> config set true, this button will be enabled after payload is applied, to switch A/B slot on next reboot.</li></ul><h2><a class="h" name="Sending-HTTP-headers-from-UpdateEngine" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Sending-HTTP-headers-from-UpdateEngine"><span></span></a><a class="h" name="sending-http-headers-from-updateengine" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#sending-http-headers-from-updateengine"><span></span></a>Sending HTTP headers from UpdateEngine</h2><p>Sometimes OTA package server might require some HTTP headers to be present, e.g. <code class="code">Authorization</code> header to contain valid auth token. While performing streaming update, <code class="code">UpdateEngine</code> allows passing on certain HTTP headers; as of writing this sample app, these headers are <code class="code">Authorization</code> and <code class="code">User-Agent</code>.</p><p><code class="code">android.os.UpdateEngine#applyPayload</code> contains information on which HTTP headers are supported.</p><h2><a class="h" name="Used-update_engine-APIs" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Used-update_engine-APIs"><span></span></a><a class="h" name="used-update_engine-apis" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#used-update_engine-apis"><span></span></a>Used update_engine APIs</h2><h3><a class="h" name="UpdateEngine_bind" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#UpdateEngine_bind"><span></span></a><a class="h" name="updateengine_bind" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#updateengine_bind"><span></span></a>UpdateEngine#bind</h3><p>Binds given callbacks to update_engine. When update_engine successfully initialized, it's guaranteed to invoke callback onStatusUpdate.</p><h3><a class="h" name="UpdateEngine_applyPayload" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#UpdateEngine_applyPayload"><span></span></a><a class="h" name="updateengine_applypayload" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#updateengine_applypayload"><span></span></a>UpdateEngine#applyPayload</h3><p>Start an update attempt to download an apply the provided <code class="code">payload_url</code> if no other update is running. The extra <code class="code">key_value_pair_headers</code> will be included when fetching the payload.</p><p><code class="code">key_value_pair_headers</code> argument also accepts properties other than HTTP Headers. List of allowed properties can be found in <code class="code">system/update_engine/common/constants.cc</code>.</p><h3><a class="h" name="UpdateEngine_cancel" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#UpdateEngine_cancel"><span></span></a><a class="h" name="updateengine_cancel" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#updateengine_cancel"><span></span></a>UpdateEngine#cancel</h3><p>Cancel the ongoing update. The update could be running or suspended, but it can't be canceled after it was done.</p><h3><a class="h" name="UpdateEngine_resetStatus" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#UpdateEngine_resetStatus"><span></span></a><a class="h" name="updateengine_resetstatus" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#updateengine_resetstatus"><span></span></a>UpdateEngine#resetStatus</h3><p>Reset the already applied update back to an idle state. This method can only be called when no update attempt is going on, and it will reset the status back to idle, deleting the currently applied update if any.</p><h3><a class="h" name="Callback_onStatusUpdate" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Callback_onStatusUpdate"><span></span></a><a class="h" name="callback_onstatusupdate" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#callback_onstatusupdate"><span></span></a>Callback: onStatusUpdate</h3><p>Called whenever the value of <code class="code">status</code> or <code class="code">progress</code> changes. For <code class="code">progress</code> values changes, this method will be called only if it changes significantly. At this time of writing this doc, delta for <code class="code">progress</code> is <code class="code">0.005</code>.</p><p><code class="code">onStatusUpdate</code> is always called when app binds to update_engine, except when update_engine fails to initialize.</p><h3><a class="h" name="Callback_onPayloadApplicationComplete" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Callback_onPayloadApplicationComplete"><span></span></a><a class="h" name="callback_onpayloadapplicationcomplete" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#callback_onpayloadapplicationcomplete"><span></span></a>Callback: onPayloadApplicationComplete</h3><p>Called whenever an update attempt is completed or failed.</p><h2><a class="h" name="Running-on-a-device" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Running-on-a-device"><span></span></a><a class="h" name="running-on-a-device" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#running-on-a-device"><span></span></a>Running on a device</h2><p>The commands are expected to be run from <code class="code">$ANDROID_BUILD_TOP</code> and for demo purpose only.</p><h3><a class="h" name="Without-the-privileged-system-permissions" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Without-the-privileged-system-permissions"><span></span></a><a class="h" name="without-the-privileged-system-permissions" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#without-the-privileged-system-permissions"><span></span></a>Without the privileged system permissions</h3><ol><li>Compile the app <code class="code">mmma -j bootable/recovery/updater_sample</code>.</li><li>Install the app to the device using <code class="code">adb install &lt;APK_PATH&gt;</code>.</li><li>Change permissions on <code class="code">/data/ota_package/</code> to <code class="code">0777</code> on the device.</li><li>Set SELinux mode to permissive. See instructions below.</li><li>Add update config files; look above at <a href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Update-Config-file">Update Config file</a>.</li><li>Push OTA packages to the device.</li><li>Run the sample app.</li></ol><h3><a class="h" name="With-the-privileged-system-permissions" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#With-the-privileged-system-permissions"><span></span></a><a class="h" name="with-the-privileged-system-permissions" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#with-the-privileged-system-permissions"><span></span></a>With the privileged system permissions</h3><p>To run sample app as a privileged system app, it needs to be installed in <code class="code">/system/priv-app/</code>. This directory is expected to be read-only, unless explicitly remounted.</p><p>The recommended way to run the app is to build and install it as a privileged system app, so it's granted the required permissions to access <code class="code">update_engine</code> service as well as OTA package files. Detailed steps are as follows:</p><ol><li><a href="https://source.android.com/setup/build/building">Prepare to build</a></li><li>Add the module (SystemUpdaterSample) to the <code class="code">PRODUCT_PACKAGES</code> list for the lunch target. e.g. add a line containing <code class="code">PRODUCT_PACKAGES += SystemUpdaterSample</code> to <code class="code">device/google/marlin/device-common.mk</code>.</li><li><a href="https://source.android.com/devices/tech/config/perms-whitelist">Whitelist the sample app</a><ul><li>Add</li></ul><pre class="code"> &lt;privapp-permissions package="com.example.android.systemupdatersample"&gt;
     &lt;permission name="android.permission.ACCESS_CACHE_FILESYSTEM"/&gt;
 &lt;/privapp-permissions&gt;
</pre>to <code class="code">frameworks/base/data/etc/privapp-permissions-platform.xml</code></li><li>Add <code class="code">privileged: true</code> to SystemUpdaterSample <a href="https://android.googlesource.com/platform/bootable/recovery/+/refs/heads/master/updater_sample/Android.bp">building rule</a>.</li><li>Build sample app <code class="code">make -j SystemUpdaterSample</code>.</li><li>Build Android <code class="code">make -j</code></li><li><a href="https://source.android.com/setup/build/running">Flash the device</a></li><li>Add update config files; look above at <code class="code">## Update Config file</code>; <code class="code">adb root</code> might be required.</li><li>Push OTA packages to the device if there is no server to stream packages from; changing of SELinux labels of OTA packages directory might be required <code class="code">chcon -R u:object_r:ota_package_file:s0 /data/my-sample-ota-builds-dir</code></li><li>Run the sample app.</li></ol><h2><a class="h" name="Development" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Development"><span></span></a><a class="h" name="development" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#development"><span></span></a>Development</h2><ul><li>[x] Create a UI with list of configs, current version, control buttons, progress bar and log viewer</li><li>[x] Add <code class="code">PayloadSpec</code> and <code class="code">PayloadSpecs</code> for working with update zip file</li><li>[x] Add <code class="code">UpdateConfig</code> for working with json config files</li><li>[x] Add applying non-streaming update</li><li>[x] Prepare streaming update (partially downloading package)</li><li>[x] Add applying streaming update</li><li>[x] Add stop/reset the update</li><li>[x] Add demo for passing HTTP headers to <code class="code">UpdateEngine#applyPayload</code></li><li>[x] <a href="https://source.android.com/devices/architecture/vintf/match-rules">Package compatibility check</a></li><li>[x] Deferred switch slot demo</li><li>[x] Add UpdateManager; extract update logic from MainActivity</li><li>[x] Add Sample app update state (separate from update_engine status)</li><li>[x] Add smart update completion detection using onStatusUpdate</li><li>[x] Add pause/resume demo</li><li>[x] Verify system partition checksum for package</li></ul><h2><a class="h" name="Running-tests" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Running-tests"><span></span></a><a class="h" name="running-tests" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#running-tests"><span></span></a>Running tests</h2><p>The commands are expected to be run from <code class="code">$ANDROID_BUILD_TOP</code>.</p><ol><li>Build <code class="code">make -j SystemUpdaterSample</code> and <code class="code">make -j SystemUpdaterSampleTests</code>.</li><li>Install app <code class="code">adb install $OUT/system/app/SystemUpdaterSample/SystemUpdaterSample.apk</code></li><li>Install tests <code class="code">adb install $OUT/testcases/SystemUpdaterSampleTests/arm64/SystemUpdaterSampleTests.apk</code></li><li>Run tests <code class="code">adb shell am instrument -w com.example.android.systemupdatersample.tests/android.support.test.runner.AndroidJUnitRunner</code></li><li>Run a test file<pre class="code">adb shell am instrument \
  -w -e class com.example.android.systemupdatersample.UpdateManagerTest#applyUpdate_appliesPayloadToUpdateEngine \
  com.example.android.systemupdatersample.tests/android.support.test.runner.AndroidJUnitRunner
</pre></li></ol><h2><a class="h" name="Accessing-API" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Accessing-API"><span></span></a><a class="h" name="accessing-api" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#accessing-api"><span></span></a>Accessing <code class="code">android.os.UpdateEngine</code> API</h2><p><code class="code">android.os.UpdateEngine</code> APIs are marked as <code class="code">@SystemApi</code>, meaning only system apps can access them.</p><h2><a class="h" name="Getting-read_write-access-to" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Getting-read_write-access-to"><span></span></a><a class="h" name="getting-read_write-access-to" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#getting-read_write-access-to"><span></span></a>Getting read/write access to <code class="code">/data/ota_package/</code></h2><p>Access to cache filesystem is granted only to system apps.</p><h2><a class="h" name="Setting-SELinux-mode-to-permissive-0" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#Setting-SELinux-mode-to-permissive-0"><span></span></a><a class="h" name="setting-selinux-mode-to-permissive-0" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#setting-selinux-mode-to-permissive-0"><span></span></a>Setting SELinux mode to permissive (0)</h2><pre class="code"><span class="pln">local$ adb root
local$ adb shell
android# setenforce 0
android# getenforce
</span></pre><h2><a class="h" name="License" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#License"><span></span></a><a class="h" name="license" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample#license"><span></span></a>License</h2><p>SystemUpdaterSample app is released under <a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License 2.0</a>.</p></div></div></div></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a>| <a href="https://policies.google.com/terms">Terms</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="https://android.googlesource.com/platform/bootable/recovery/+/master/updater_sample?format=JSON">json</a></span></div></footer><gdiv class="ginger-extension-writer" style="display: none;"><gdiv class="ginger-extension-writer-frame"><iframe src="./updater_sample - platform_bootable_recovery - Git at Google_files/index.html"></iframe></gdiv></gdiv></body></html>